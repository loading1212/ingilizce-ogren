<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>English Learning</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
    h1, h2 { text-align: center; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(60px, 1fr)); gap: 10px; margin: 20px 0; }
    .learning-card { background: white; border: 2px solid #ddd; padding: 20px; text-align: center; cursor: pointer; border-radius: 10px; transition: transform 0.2s; }
    .learning-card:hover { transform: scale(1.1); background: #f0f8ff; }
    .learned { background: #c8e6c9 !important; }
    #progress { text-align: center; font-weight: bold; margin: 20px 0; }
    #quiz, #stats { margin-top: 30px; padding: 20px; background: #fff; border-radius: 10px; }
    button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; background: #2196f3; color: white; }
    button:hover { background: #1976d2; }
    .celebration { font-size: 40px; text-align: center; animation: pop 1s; }
    @keyframes pop { 0%{ transform:scale(0.5); opacity:0 } 100%{ transform:scale(1); opacity:1 } }
  </style>
</head>
<body>
  <h1>üìö English Learning Game</h1>

  <div id="progress">Progress: 0%</div>

  <h2>üî§ Letters</h2>
  <div class="grid" id="letters"></div>

  <h2>üî¢ Numbers (1‚Äì100)</h2>
  <div class="grid" id="numbers"></div>

  <div id="quiz">
    <h2>‚ùì Quiz</h2>
    <p id="quiz-question">Press start to begin quiz.</p>
    <button onclick="startQuiz()">Start Quiz</button>
    <div id="quiz-options"></div>
  </div>

  <div id="stats">
    <h2>üìä Statistics</h2>
    <p id="stats-text">No data yet.</p>
  </div>

  <div id="celebration"></div>

<script>
  // === Ses sistemi (Archive.org) ===
  const audioBase = "https://archive.org/download/ingilizce-sesler-projesi/";

  function playAudio(fileName, callback) {
    const audio = new Audio(audioBase + fileName);
    audio.play()
      .then(() => {
        audio.onended = () => { if (callback) callback(); };
      })
      .catch(err => {
        console.error("Ses √ßalma hatasƒ±:", err);
        if (callback) callback();
      });
  }

  function playLetter(letter) {
    playAudio(letter + ".mp3", () => {
      learnedLetters.add(letter);
      updateProgress(); saveProgress();
      const cards = document.querySelectorAll('.learning-card');
      cards.forEach(card => {
        if (card.querySelector('.card-letter')?.textContent === letter) {
          card.classList.add('learned');
          showCelebration('üéâ');
        }
      });
    });
  }

  function playNumber(number) {
    playAudio(number + ".mp3", () => {
      learnedNumbers.add(number);
      updateProgress(); saveProgress();
      const cards = document.querySelectorAll('.learning-card');
      cards.forEach(card => {
        if (card.querySelector('.card-number')?.textContent == number) {
          card.classList.add('learned');
          showCelebration('‚≠ê');
        }
      });
    });
  }

  // === ƒ∞lerleme kaydƒ± ===
  let learnedLetters = new Set();
  let learnedNumbers = new Set();

  function saveProgress() {
    localStorage.setItem("learnedLetters", JSON.stringify([...learnedLetters]));
    localStorage.setItem("learnedNumbers", JSON.stringify([...learnedNumbers]));
  }

  function loadProgress() {
    let l = JSON.parse(localStorage.getItem("learnedLetters")) || [];
    let n = JSON.parse(localStorage.getItem("learnedNumbers")) || [];
    learnedLetters = new Set(l);
    learnedNumbers = new Set(n);
  }

  function updateProgress() {
    const total = 26 + 100;
    const done = learnedLetters.size + learnedNumbers.size;
    let percent = Math.round((done / total) * 100);
    document.getElementById("progress").textContent = `Progress: ${percent}%`;
    document.getElementById("stats-text").textContent =
      `Learned Letters: ${learnedLetters.size}/26, Numbers: ${learnedNumbers.size}/100`;
  }

  // === Kartlarƒ± olu≈ütur ===
  function createCards() {
    const lettersDiv = document.getElementById("letters");
    for (let i = 65; i <= 90; i++) {
      const letter = String.fromCharCode(i);
      const card = document.createElement("div");
      card.className = "learning-card";
      if (learnedLetters.has(letter)) card.classList.add("learned");
      card.innerHTML = `<div class="card-letter">${letter}</div>`;
      card.onclick = () => playLetter(letter);
      lettersDiv.appendChild(card);
    }

    const numbersDiv = document.getElementById("numbers");
    for (let i = 1; i <= 100; i++) {
      const card = document.createElement("div");
      card.className = "learning-card";
      if (learnedNumbers.has(i)) card.classList.add("learned");
      card.innerHTML = `<div class="card-number">${i}</div>`;
      card.onclick = () => playNumber(i);
      numbersDiv.appendChild(card);
    }
  }

  // === Quiz (sessiz) ===
  const quizWords = ["Apple","Banana","Cat","Dog","Fish"];
  let quizIndex = 0;

  function startQuiz() {
    quizIndex = 0;
    askQuestion();
  }

  function askQuestion() {
    if (quizIndex >= quizWords.length) {
      document.getElementById("quiz-question").textContent = "Quiz finished!";
      document.getElementById("quiz-options").innerHTML = "";
      return;
    }
    let word = quizWords[quizIndex];
    document.getElementById("quiz-question").textContent = `Which one is "${word}"?`;

    let options = [...quizWords].sort(() => 0.5 - Math.random()).slice(0,3);
    if (!options.includes(word)) options[0] = word;
    const div = document.getElementById("quiz-options");
    div.innerHTML = "";
    options.forEach(opt => {
      const btn = document.createElement("button");
      btn.textContent = opt;
      btn.onclick = () => {
        if (opt === word) {
          showCelebration("‚úÖ Correct!");
        } else {
          showCelebration("‚ùå Wrong!");
        }
        quizIndex++;
        setTimeout(askQuestion, 1000);
      };
      div.appendChild(btn);
    });
  }

  // === Kutlama ===
  function showCelebration(symbol) {
    const div = document.getElementById("celebration");
    div.textContent = symbol;
    setTimeout(() => div.textContent = "", 1500);
  }

  // === Ba≈ülat ===
  loadProgress();
  createCards();
  updateProgress();
</script>
</body>
</html>
