<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ä°ngilizce Ã–ÄŸreniyorum</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    .learning-card { display:inline-block; margin:10px; padding:20px; border:1px solid #ccc; border-radius:10px; cursor:pointer; }
    .learned { background:#d4edda; }
    .celebration { font-size:2em; animation: pop 1s ease; }
    @keyframes pop { 0%{transform:scale(0);} 50%{transform:scale(1.3);} 100%{transform:scale(1);} }
  </style>
</head>
<body>
  <h1>ðŸ“š Ä°ngilizce Ã–ÄŸreniyorum</h1>
  <div id="progress"></div>
  <div id="letters"></div>
  <div id="numbers"></div>
  <script>let learnedLetters = new Set();
    let learnedNumbers = new Set();
    let totalQuizScore = 0;
    let studyStartTime = Date.now();

    function updateProgress() {
        const letterCount = learnedLetters.size;
        const numberCount = learnedNumbers.size;
        document.getElementById("progress").innerHTML = `
            Ã–ÄŸrenilen Harfler: ${letterCount}/26 <br>
            Ã–ÄŸrenilen SayÄ±lar: ${numberCount}/10 <br>
            Toplam Quiz PuanÄ±: ${totalQuizScore}
        `;
    }

    function showCelebration(icon) {
        const el = document.createElement("div");
        el.className = "celebration";
        el.textContent = icon;
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 1000);
    }

    // Ä°lerlemeyi kaydet
    function saveProgress() {
        const data = {
            learnedLetters: Array.from(learnedLetters),
            learnedNumbers: Array.from(learnedNumbers),
            totalQuizScore,
            studyStartTime
        };
        localStorage.setItem("englishLearningProgress", JSON.stringify(data));
        console.log("Ä°lerleme kaydedildi:", data);
    }

    // Ä°lerlemeyi yÃ¼kle
    function loadProgress() {
        const saved = localStorage.getItem("englishLearningProgress");
        if (saved) {
            try {
                const data = JSON.parse(saved);
                learnedLetters = new Set(data.learnedLetters || []);
                learnedNumbers = new Set(data.learnedNumbers || []);
                totalQuizScore = data.totalQuizScore || 0;
                studyStartTime = data.studyStartTime || Date.now();
                console.log("KayÄ±tlÄ± ilerleme yÃ¼klendi:", data);
            } catch (e) {
                console.error("Ä°lerleme yÃ¼klenemedi:", e);
            }
        }
        updateProgress();
    }// --- Archive.org Ses Sistemi ---
    const audioBase = "https://archive.org/download/ingilizce-sesler-projesi/";

    function playAudio(fileName, callback) {
        const audio = new Audio(audioBase + fileName);
        audio.play()
            .then(() => {
                console.log("Ses Ã§alÄ±nÄ±yor:", fileName);
                audio.onended = () => {
                    if (callback) callback();
                };
            })
            .catch(err => {
                console.error("Ses Ã§alma hatasÄ±:", err);
                if (callback) callback();
            });
    }

    function playLetter(letter) {
        playAudio(letter + ".mp3", () => {
            learnedLetters.add(letter);
            updateProgress();
            saveProgress();
            
            const cards = document.querySelectorAll('.learning-card');
            cards.forEach(card => {
                if (card.querySelector('.card-letter')?.textContent === letter) {
                    card.classList.add('learned');
                    showCelebration('ðŸŽ‰');
                }
            });
        });
    }

    function playNumber(number) {
        playAudio(number + ".mp3", () => {
            learnedNumbers.add(number);
            updateProgress();
            saveProgress();
            
            const cards = document.querySelectorAll('.learning-card');
            cards.forEach(card => {
                if (card.querySelector('.card-number')?.textContent == number) {
                    card.classList.add('learned');
                    showCelebration('â­');
                }
            });
        });
    }window.onload = () => {
        loadProgress();

        // Harfleri oluÅŸtur
        const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
        const lettersDiv = document.getElementById("letters");
        letters.forEach(l => {
            const div = document.createElement("div");
            div.className = "learning-card";
            div.innerHTML = `<div class="card-letter">${l}</div>`;
            div.onclick = () => playLetter(l);
            lettersDiv.appendChild(div);
        });

        // SayÄ±larÄ± oluÅŸtur
        const numbers = [1,2,3,4,5,6,7,8,9,10];
        const numbersDiv = document.getElementById("numbers");
        numbers.forEach(n => {
            const div = document.createElement("div");
            div.className = "learning-card";
            div.innerHTML = `<div class="card-number">${n}</div>`;
            div.onclick = () => playNumber(n);
            numbersDiv.appendChild(div);
        });
    };
  </script>
</body>
</html>
